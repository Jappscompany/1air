<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1Air ‚Äî A crisp MP4 player</title>
  <meta name="description" content="Clean, private MP4 player with Picture‚Äëin‚ÄëPicture and background audio." />
  
  <style>
    :root {
      --bg: #ffffff;
      --bg-subtle: #f5f7fa;
      --fg: #1d1d1f;
      --muted: #86868b;
      --card: #ffffff;
      --stroke: #e5e7eb;
      --brand: #007AFF;
      --brand-hover: #0056b3;
      --brand-ink: #ffffff;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --shadow-hover: 0 10px 25px rgba(0, 122, 255, 0.15);
      --radius: 16px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #000000;
        --bg-subtle: #1c1c1e;
        --fg: #f5f5f7;
        --muted: #a1a1a6;
        --card: #1c1c1e;
        --stroke: #38383a;
        --shadow: 0 4px 20px rgba(0,0,0,0.3);
      }
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--bg);
      background-image: radial-gradient(circle at 50% -20%, rgba(0, 122, 255, 0.12), transparent 70%);
      color: var(--fg);
      line-height: 1.6;
      letter-spacing: -0.02em;
    }

    a { color: inherit; text-decoration: none; transition: all 0.2s; }
    .wrap { max-width: 1080px; margin: 0 auto; padding: 0 20px; }

    /* Lang Switcher */
    .lang-switch { position: absolute; top: 20px; right: 20px; font-size: 13px; z-index: 200; }
    .lang-switch a { cursor: pointer; color: var(--muted); margin-left: 8px; }
    .lang-switch a.active { color: var(--brand); font-weight: bold; }
    
    /* Language Dropdown */
    .lang-dropdown { position: relative; display: inline-block; }
    .lang-dropdown-btn {
      background: var(--bg-subtle);
      border: 1px solid var(--stroke);
      border-radius: 8px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      color: var(--fg);
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }
    .lang-dropdown-btn:hover {
      background: var(--stroke);
      border-color: var(--brand);
    }
    .lang-dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 4px;
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: 8px;
      box-shadow: var(--shadow);
      max-height: 400px;
      overflow-y: auto;
      min-width: 180px;
      display: none;
      z-index: 1000;
    }
    .lang-dropdown-menu.show { display: block; }
    .lang-dropdown-item {
      padding: 8px 16px;
      cursor: pointer;
      color: var(--fg);
      font-size: 13px;
      transition: background 0.2s;
      border-bottom: 1px solid var(--stroke);
    }
    .lang-dropdown-item:last-child { border-bottom: none; }
    .lang-dropdown-item:hover {
      background: var(--bg-subtle);
      color: var(--brand);
    }
    .lang-dropdown-item.active {
      background: var(--bg-subtle);
      color: var(--brand);
      font-weight: 600;
    }

    /* Header */
    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    @media (prefers-color-scheme: dark) {
      header { background: rgba(28, 28, 30, 0.8); border-bottom: 1px solid rgba(255,255,255,0.1); }
    }

    .nav { display: flex; align-items: center; justify-content: space-between; height: 70px; }
    .brand { font-weight: 800; font-size: 20px; letter-spacing: -0.5px; }
    .brand span { color: var(--brand); }
    
    .links { display: flex; gap: 24px; align-items: center; font-size: 15px; font-weight: 500; }
    .links a:not(.btn):hover { color: var(--brand); }
    .mobile-hide { display: none; }
    @media(min-width: 600px) { .mobile-hide { display: inline-block; } }

    /* Buttons */
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 10px 22px; border-radius: 99px;
      font-weight: 600; font-size: 15px;
    }
    .btn.primary {
      background: var(--brand); color: var(--brand-ink);
      box-shadow: 0 4px 10px rgba(0, 122, 255, 0.2);
    }
    .btn.primary:hover { background: var(--brand-hover); transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0, 122, 255, 0.3); }
    
    .btn.secondary { 
        background: var(--bg-subtle); color: var(--fg); border: 1px solid var(--stroke);
        padding: 8px 18px; font-size: 14px;
    }
    .btn.secondary:hover { background: #e5e5ea; transform: translateY(-1px); }

    /* Hero */
    .hero { text-align: center; padding: 110px 0 70px; animation: fadeIn 0.8s ease-out; }
    .badge {
      display: inline-block; padding: 6px 14px;
      background: rgba(0, 122, 255, 0.1); color: var(--brand);
      border-radius: 99px; font-size: 13px; font-weight: 700;
      margin-bottom: 24px;
    }
    h1 {
      font-size: clamp(40px, 8vw, 68px);
      line-height: 1.05; margin: 0 0 24px;
      background: linear-gradient(135deg, var(--fg) 30%, #999);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.03em;
    }
    .sub {
      font-size: clamp(18px, 4vw, 22px); color: var(--muted);
      max-width: 640px; margin: 0 auto 40px;
    }

    /* Features */
    section { padding: 90px 0; }
    h2 { font-size: 36px; text-align: center; margin-bottom: 60px; letter-spacing: -0.02em; }
    
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 30px; }
    
    .card {
      background: var(--card); border: 1px solid var(--stroke);
      border-radius: var(--radius); padding: 36px 30px;
      transition: all 0.3s ease;
      position: relative; overflow: hidden;
      display: flex; flex-direction: column;
    }
    .card:hover { transform: translateY(-6px); box-shadow: var(--shadow-hover); border-color: var(--brand); }
    .icon { font-size: 42px; margin-bottom: 24px; display: block; }
    .card h3 { margin: 0 0 12px; font-size: 20px; font-weight: 700; }
    .card p { color: var(--muted); font-size: 16px; margin: 0 0 24px 0; line-height: 1.6; flex-grow: 1; }
    
    .card-footer { margin-top: auto; }

    /* Footer */
    footer { border-top: 1px solid var(--stroke); padding: 50px 0; text-align: center; color: var(--muted); font-size: 14px; }
    .foot-links { margin-bottom: 24px; display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; }
    .foot-links a:hover { color: var(--brand); text-decoration: underline; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <div class="lang-switch wrap" style="position:relative; text-align:right;">
    <div class="lang-dropdown">
      <button class="lang-dropdown-btn" onclick="toggleLangDropdown()">
        <span id="current-lang-name">English</span>
        <span>‚ñº</span>
      </button>
      <div class="lang-dropdown-menu" id="lang-dropdown-menu"></div>
    </div>
  </div>

  <header>
    <div class="wrap nav">
      <a href="#" class="brand">1Air<span>.</span></a>
      <nav class="links">
        <a href="#features" class="mobile-hide" data-i18n="nav_features">Features</a>
        <a href="policy.html" class="mobile-hide" data-i18n="nav_privacy">Privacy</a>
        <a href="https://apps.apple.com/kr/app/1air-player/id6754903042" class="btn primary" data-i18n="nav_download">Download</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="wrap hero">
      <span class="badge" data-i18n="hero_badge">‚ú® New Release</span>
      <h1 data-i18n="hero_title">MP4s, the way<br>they should play.</h1>
      <p class="sub" data-i18n="hero_sub">Experience the intuitive and lightweight 1Air Player.<br>No ads, just clean playback with background audio.</p>
      <a href="https://apps.apple.com/kr/app/1air-player/id6754903042" class="btn primary" data-i18n="btn_download">Download on App Store</a>
    </section>

    <section id="features" class="wrap">
      <h2 data-i18n="feat_title">Why 1Air?</h2>
      <div class="grid">
        <article class="card">
          <span class="icon">üñºÔ∏è</span>
          <h3 data-i18n="feat_1_title">Picture-in-Picture</h3>
          <p data-i18n="feat_1_desc">Keep watching while you multitask. Native PiP support.</p>
        </article>

        <article class="card">
          <span class="icon">üéß</span>
          <h3 data-i18n="feat_2_title">Background Audio</h3>
          <p data-i18n="feat_2_desc">Audio continues when screen locks. Perfect for podcasts.</p>
        </article>

        <article class="card">
          <span class="icon">‚úã</span>
          <h3 data-i18n="feat_3_title">Smooth Controls</h3>
          <p data-i18n="feat_3_desc">Gestures for volume and seeking. Fast and snappy.</p>
        </article>

        <article class="card">
          <span class="icon">üîí</span>
          <h3 data-i18n="feat_4_title">Private & Ad-free</h3>
          <p data-i18n="feat_4_desc">No tracking, no ads. Your videos stay on your device.</p>
        </article>

        <article class="card" style="border-color: var(--brand); background: var(--bg-subtle);">
            <span class="icon">ü¶ô</span>
            <h3 data-i18n="feat_5_title">AI Integration</h3>
            <p data-i18n="feat_5_desc">Connect with local AI models via Ollama for smart features.</p>
            <div class="card-footer">
                <a href="ollamatutorial.html" class="btn secondary" data-i18n="feat_5_btn">Setup Guide</a>
            </div>
        </article>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot-links">
        <a href="policy.html" data-i18n="footer_privacy">Privacy Policy</a>
        <span style="color:#ddd">¬∑</span>
        <a href="mailto:jappscompany@gmail.com" data-i18n="footer_contact">Contact Support</a>
      </div>
      <p>&copy; <span id="year"></span> <span data-i18n="footer_copy">1Air Player. All rights reserved.</span></p>
    </div>
  </footer>

  <script>
    // Language configuration
    const LANGUAGES = [
      { code: 'ar', name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
      { code: 'ca', name: 'Catal√†' },
      { code: 'cs', name: 'ƒåe≈°tina' },
      { code: 'da', name: 'Dansk' },
      { code: 'de', name: 'Deutsch' },
      { code: 'el', name: 'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨' },
      { code: 'en', name: 'English' },
      { code: 'es', name: 'Espa√±ol' },
      { code: 'es-MX', name: 'Espa√±ol (M√©xico)' },
      { code: 'fi', name: 'Suomi' },
      { code: 'fr', name: 'Fran√ßais' },
      { code: 'fr-CA', name: 'Fran√ßais (Canada)' },
      { code: 'he', name: '◊¢◊ë◊®◊ô◊™' },
      { code: 'hi', name: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä' },
      { code: 'hr', name: 'Hrvatski' },
      { code: 'hu', name: 'Magyar' },
      { code: 'id', name: 'Bahasa Indonesia' },
      { code: 'it', name: 'Italiano' },
      { code: 'ja', name: 'Êó•Êú¨Ë™û' },
      { code: 'ko', name: 'ÌïúÍµ≠Ïñ¥' },
      { code: 'ms', name: 'Bahasa Melayu' },
      { code: 'nb', name: 'Norsk Bokm√•l' },
      { code: 'nl', name: 'Nederlands' },
      { code: 'pl', name: 'Polski' },
      { code: 'pt-BR', name: 'Portugu√™s (Brasil)' },
      { code: 'pt-PT', name: 'Portugu√™s (Portugal)' },
      { code: 'ro', name: 'Rom√¢nƒÉ' },
      { code: 'ru', name: '–†—É—Å—Å–∫–∏–π' },
      { code: 'sk', name: 'Slovenƒçina' },
      { code: 'sv', name: 'Svenska' },
      { code: 'th', name: '‡πÑ‡∏ó‡∏¢' },
      { code: 'tr', name: 'T√ºrk√ße' },
      { code: 'uk', name: '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' },
      { code: 'vi', name: 'Ti·∫øng Vi·ªát' },
      { code: 'zh-Hans', name: 'ÁÆÄ‰Ωì‰∏≠Êñá' },
      { code: 'zh-Hant', name: 'ÁπÅÈ´î‰∏≠Êñá' }
    ];

    const LOCALES_DIR = './locales';
    const STORAGE_KEY = 'app_lang';
    let currentDict = {};

    function initLangDropdown() {
      const menu = document.getElementById('lang-dropdown-menu');
      menu.innerHTML = '';
      LANGUAGES.forEach(lang => {
        const item = document.createElement('div');
        item.className = 'lang-dropdown-item';
        item.textContent = lang.name;
        item.onclick = () => setLanguage(lang.code);
        menu.appendChild(item);
      });
    }

    function toggleLangDropdown() {
      document.getElementById('lang-dropdown-menu').classList.toggle('show');
    }

    document.addEventListener('click', (e) => {
      const dropdown = document.querySelector('.lang-dropdown');
      if (dropdown && !dropdown.contains(e.target)) {
        document.getElementById('lang-dropdown-menu').classList.remove('show');
      }
    });

    function canonicalizeLangCode(input) {
      if (!input) return 'en';
      const raw = String(input).replace('_', '-');
      const lower = raw.toLowerCase();
      const match = LANGUAGES.find(l => l.code.toLowerCase() === lower);
      return match ? match.code : raw;
    }

    async function fetchJson(path) {
      const res = await fetch(path, { cache: 'no-cache' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      return await res.json();
    }

    async function loadLocale(lang) {
      const codes = [lang];
      const base = lang.split('-')[0];
      if (base !== lang) codes.push(base);
        if (!codes.includes('en')) codes.push('en');

          for (const code of codes) {
            try {
              console.log(`[i18n] Trying to load: ${LOCALES_DIR}/${code}.json`);
              const dict = await fetchJson(`${LOCALES_DIR}/${code}.json`);
              if (dict && typeof dict === 'object') {
                console.log(`[i18n] Successfully loaded: ${code}.json`);
                return { dict, resolved: code };
              }
            } catch (e) {
              console.error(`[i18n] Failed to load ${code}.json:`, e);
          }
        }
      return { dict: {}, resolved: 'en' };
    }

    function applyTranslations(landingDict) {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (landingDict[key] != null) {
          el.innerHTML = String(landingDict[key]);
        }
      });

      if (landingDict.title) document.title = landingDict.title;
      const meta = document.querySelector('meta[name="description"]');
      if (meta && landingDict.meta_desc) meta.setAttribute('content', landingDict.meta_desc);
    }

    function updateLangUI(code) {
      const langInfo = LANGUAGES.find(l => l.code === code) || LANGUAGES.find(l => l.code === 'en');
      if (langInfo) {
        document.getElementById('current-lang-name').textContent = langInfo.name;
        document.querySelectorAll('.lang-dropdown-item').forEach(item => {
          item.classList.toggle('active', item.textContent === langInfo.name);
        });
      }
      document.getElementById('lang-dropdown-menu').classList.remove('show');
    }

    async function setLanguage(lang) {
      const code = canonicalizeLangCode(lang);
      localStorage.setItem(STORAGE_KEY, code);
      document.documentElement.lang = code;

      const { dict, resolved } = await loadLocale(code);
      currentDict = dict;

      // ‚úÖ landing ÏûàÏúºÎ©¥ landing, ÏóÜÏúºÎ©¥ ÏµúÏÉÅÏúÑ dict ÏÇ¨Ïö©
      const landingDict =
        (dict && typeof dict === 'object')
          ? (dict.landing && typeof dict.landing === 'object' ? dict.landing : dict)
          : {};

      applyTranslations(landingDict);
      updateLangUI(resolved);
    }

    function guessLangCode() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        const canonical = canonicalizeLangCode(saved);
        if (LANGUAGES.find(l => l.code === canonical)) return canonical;
      }

      const nav = canonicalizeLangCode(navigator.language || 'en');
      if (LANGUAGES.find(l => l.code === nav)) return nav;

      const base = nav.split('-')[0];
      const baseMatch = LANGUAGES.find(l => l.code.toLowerCase() === base.toLowerCase());
      if (baseMatch) return baseMatch.code;

      return 'en';
    }

    // Initialize
    document.getElementById('year').textContent = new Date().getFullYear();
    initLangDropdown();

    window.addEventListener('load', () => {
      setLanguage(guessLangCode());
    });
  </script>
</body>
</html>
