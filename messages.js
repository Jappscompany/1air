const translations = {
  en: {
    title: "Privacy Policy",
    effectiveDate: "Effective date",
    nav: {
      summary: "Summary",
      collect: "Data Collection",
      use: "Usage",
      share: "Sharing",
      rights: "Rights",
      contact: "Contact"
    },
    summary: {
      h: "At a Glance",
      list: [
        "<strong>No tracking. No ads.</strong> 1Air does not include advertising or third-party trackers.",
        "<strong>Your videos stay on your device.</strong> The app reads MP4 files you choose and stores them locally.",
        "<strong>Optional iCloud Drive.</strong> Files from iCloud remain in your iCloud account under Apple’s terms.",
        "<strong>Minimal diagnostics.</strong> We only receive anonymized crash data if you opt in via Apple settings."
      ]
    },
    who: {
      h: "Who We Are",
      dev: "<strong>Developer:</strong> J-Apps (“we”, “us”, or “our”)",
      app: "<strong>App:</strong> 1Air (iOS/iPadOS/macOS)",
      contact: "<strong>Contact:</strong> <a href='mailto:jappscompany@gmail.com'>jappscompany@gmail.com</a>"
    },
    collect: {
      h: "Data We Collect",
      h1: "1) Content You Choose",
      p1: "When you select videos, 1Air is granted read access only to those items. If saved, copies are stored locally in the app’s sandbox.",
      ul1: [
        "<strong>Scope:</strong> Only files you select; no background scanning.",
        "<strong>Processing:</strong> Playback occurs entirely on-device.",
        "<strong>Sync:</strong> iCloud Drive files are managed by Apple iCloud policies."
      ],
      h2: "2) Diagnostics (Optional)",
      p2: "If you opt in to share analytics with developers (Apple Settings), we may receive:",
      ul2: [
        "Crash logs and performance metrics (anonymized)",
        "Device model and OS version"
      ],
      p2note: "We do not receive your identity from these reports.",
      h3: "3) Support Communications",
      p3: "If you email us, we receive your email address and message content to respond to you.",
      hNot: "We Do <em>Not</em> Collect",
      ulNot: [
        "Personal identifiers (name, phone number, contacts)",
        "Precise location data",
        "Advertising identifiers or tracking data"
      ]
    },
    use: {
      h: "How We Use Data",
      list: [
        "To provide core functionality (video playback)",
        "To improve app quality (crash reporting)",
        "To reply to support inquiries"
      ]
    },
    share: {
      h: "Sharing & Processors",
      p1: "<strong>We do not sell your data.</strong> We do not share data with third parties for advertising.",
      p2: "<strong>Service Providers:</strong> We rely on Apple for iCloud and crash reporting services.",
      ul: [
        "<strong>Apple (iCloud & Crash Reports):</strong> Handled per Apple’s privacy policy."
      ],
      p3: "We may disclose info if required by law."
    },
    sec: {
      h: "Security",
      p: "Files are stored in the app sandbox. We rely on Apple’s system protections (iOS/macOS). No electronic storage is 100% secure, but we prioritize data protection."
    },
    ret: {
      h: "Data Retention",
      list: [
        "<strong>On-device files:</strong> Remain until you delete them or the app.",
        "<strong>Support emails:</strong> Retained only as long as needed.",
        "<strong>Diagnostics:</strong> Retained per Apple’s analytics policies."
      ]
    },
    rights: {
      h: "Your Privacy Rights",
      intro: "Depending on your region (GDPR, CCPA), you may have rights to access or delete your data.",
      list: [
        "<strong>GDPR/CCPA:</strong> You may request access/deletion of personal data we hold (support emails).",
        "For Apple-held data (iCloud, crash logs), please use Apple’s privacy tools."
      ],
      contact: "To exercise rights, contact us at <a href='mailto:jappscompany@gmail.com'>jappscompany@gmail.com</a>."
    },
    child: {
      h: "Children’s Privacy",
      p: "1Air is not directed to children under 13. We do not knowingly collect personal data from children."
    },
    change: {
      h: "Changes to This Policy",
      p: "We may update this policy. Changes will be posted here with a revised effective date."
    },
    contact: {
      h: "Contact Us",
      intro: "If you have questions about this Privacy Policy:"
    }
  },

  // ---------------------------------------------------------
  // 한국어 번역
  // ---------------------------------------------------------
  ko: {
    title: "개인정보 처리방침",
    effectiveDate: "시행일",
    nav: {
      summary: "요약",
      collect: "수집 항목",
      use: "사용 목적",
      share: "공유 및 위탁",
      rights: "이용자 권리",
      contact: "문의하기"
    },
    summary: {
      h: "요약",
      list: [
        "<strong>광고 및 추적 없음.</strong> 1Air는 광고나 제3자 추적기를 포함하지 않습니다.",
        "<strong>영상은 기기에만 저장됩니다.</strong> 사용자가 선택한 MP4 파일은 로컬 문서 폴더에서만 처리됩니다.",
        "<strong>iCloud Drive(선택).</strong> iCloud 파일을 선택할 경우 Apple의 약관에 따라 iCloud 계정 내에서 관리됩니다.",
        "<strong>최소한의 진단 데이터.</strong> Apple 설정을 통해 개발자와 공유하기를 켠 경우에만 익명화된 충돌 정보를 수신합니다."
      ]
    },
    who: {
      h: "개발자 정보",
      dev: "<strong>개발사:</strong> J-Apps ('회사', '당사')",
      app: "<strong>앱:</strong> 1Air (iOS/iPadOS/macOS)",
      contact: "<strong>문의:</strong> <a href='mailto:jappscompany@gmail.com'>jappscompany@gmail.com</a>"
    },
    collect: {
      h: "수집하는 개인정보 항목",
      h1: "1) 사용자가 선택한 콘텐츠",
      p1: "파일 선택기를 통해 영상을 선택하면 1Air는 해당 항목에 대한 읽기 권한만 갖습니다. '문서에 저장' 기능을 사용하면 앱 샌드박스 내에 로컬로 저장됩니다.",
      ul1: [
        "<strong>범위:</strong> 사용자가 직접 선택한 파일만 접근하며 백그라운드 스캔을 하지 않습니다.",
        "<strong>처리:</strong> 재생 및 파일 관리는 전적으로 기기 내(On-device)에서 이루어집니다.",
        "<strong>동기화:</strong> iCloud Drive 파일은 Apple의 정책에 따라 관리됩니다."
      ],
      h2: "2) 진단 데이터 (선택 사항)",
      p2: "Apple 설정(개인정보 보호 및 보안 > 분석 및 향상)에서 개발자와 공유를 허용한 경우 다음 정보를 수신할 수 있습니다:",
      ul2: [
        "앱 충돌 로그 및 성능 지표 (Apple에 의해 익명화됨)",
        "기기 모델명 및 OS 버전"
      ],
      p2note: "이 보고서를 통해 사용자의 신원을 식별하지 않습니다.",
      h3: "3) 고객 지원",
      p3: "이메일 문의 시, 답변을 위해 사용자의 이메일 주소와 문의 내용을 수집합니다.",
      hNot: "수집하지 <em>않는</em> 정보",
      ulNot: [
        "앱 내 개인 식별 정보 (이름, 전화번호, 연락처 등)",
        "정밀 위치 정보",
        "광고 식별자(IDFA) 또는 행동 추적 데이터"
      ]
    },
    use: {
      h: "개인정보의 이용 목적",
      list: [
        "핵심 기능 제공 (파일 접근 및 동영상 재생)",
        "앱 품질 개선 (충돌 보고 분석, 동의 시)",
        "고객 문의 응대"
      ]
    },
    share: {
      h: "개인정보의 공유 및 위탁",
      p1: "<strong>데이터를 판매하지 않습니다.</strong> 당사는 광고 목적으로 제3자에게 데이터를 공유하지 않습니다.",
      p2: "<strong>서비스 제공자:</strong> 앱 운영을 위해 다음 서비스 제공자를 이용합니다.",
      ul: [
        "<strong>Apple (iCloud 및 충돌 보고):</strong> Apple의 개인정보 처리방침 및 기기 설정에 따름."
      ],
      p3: "법적 요구가 있거나 권리 보호를 위해 필요한 경우 정보를 공개할 수 있습니다."
    },
    sec: {
      h: "보안",
      p: "사용자의 파일은 기기 내 앱 샌드박스에 저장됩니다. 당사는 iOS/macOS의 시스템 보안에 의존하며, 데이터 보호를 위해 최선을 다합니다."
    },
    ret: {
      h: "보유 및 이용 기간",
      list: [
        "<strong>기기 내 파일:</strong> 앱을 삭제하거나 파일을 지울 때까지 유지됩니다.",
        "<strong>지원 이메일:</strong> 문의 해결 및 법적 의무 이행 시까지만 보관합니다.",
        "<strong>진단 데이터:</strong> Apple의 분석 데이터 보존 정책을 따릅니다."
      ]
    },
    rights: {
      h: "이용자의 권리",
      intro: "거주 지역의 법률(GDPR 등)에 따라 데이터 접근 및 삭제 권한을 가질 수 있습니다.",
      list: [
        "당사가 보유한 정보(지원 이메일)에 대해 열람/삭제를 요청할 수 있습니다.",
        "Apple이 보유한 데이터(iCloud, 로그)는 Apple의 개인정보 도구를 이용해 주세요."
      ],
      contact: "권리 행사는 <a href='mailto:jappscompany@gmail.com'>jappscompany@gmail.com</a>으로 문의해 주세요."
    },
    child: {
      h: "아동의 개인정보",
      p: "1Air는 13세 미만 아동을 대상으로 하지 않으며, 아동의 개인정보를 고의로 수집하지 않습니다."
    },
    change: {
      h: "개정 안내",
      p: "본 방침은 변경될 수 있으며, 변경 시 앱 또는 웹사이트를 통해 공지합니다."
    },
    contact: {
      h: "문의처",
      intro: "본 개인정보 처리방침에 대해 궁금한 점이 있으시면 아래로 연락해 주세요:"
    }
  }
};

function renderList(ulId, items) {
  const ul = document.getElementById(ulId);
  if (!ul) return;
  ul.innerHTML = items.map(item => `<li>${item}</li>`).join('');
}

function setLanguage(lang) {
  const t = translations[lang];
  if (!t) return;

  // 헤더
  document.getElementById('title').innerText = t.title;
  document.getElementById('effectiveDate').innerText = t.effectiveDate;
  
  // 네비게이션
  const nav = document.getElementById('nav-links');
  nav.innerHTML = `
    <a href="#summary-section">${t.nav.summary}</a>
    <a href="#data-we-collect">${t.nav.collect}</a>
    <a href="#how-we-use">${t.nav.use}</a>
    <a href="#sharing">${t.nav.share}</a>
    <a href="#rights">${t.nav.rights}</a>
    <a href="#contact">${t.nav.contact}</a>
  `;

  // 요약
  document.getElementById('h-summary').innerText = t.summary.h;
  renderList('ul-summary', t.summary.list);

  // 개발자 정보
  document.getElementById('h-who').innerText = t.who.h;
  document.getElementById('p-who-dev').innerHTML = t.who.dev;
  document.getElementById('p-who-app').innerHTML = t.who.app;
  document.getElementById('p-who-contact').innerHTML = t.who.contact;

  // 수집
  document.getElementById('h-collect').innerText = t.collect.h;
  document.getElementById('h-col-1').innerText = t.collect.h1;
  document.getElementById('p-col-1').innerText = t.collect.p1;
  renderList('ul-col-1', t.collect.ul1);

  document.getElementById('h-col-2').innerText = t.collect.h2;
  document.getElementById('p-col-2').innerText = t.collect.p2;
  renderList('ul-col-2', t.collect.ul2);
  document.getElementById('p-col-2-note').innerText = t.collect.p2note;

  document.getElementById('h-col-3').innerText = t.collect.h3;
  document.getElementById('p-col-3').innerText = t.collect.p3;

  document.getElementById('h-col-not').innerHTML = t.collect.hNot;
  renderList('ul-col-not', t.collect.ulNot);

  // 사용
  document.getElementById('h-use').innerText = t.use.h;
  renderList('ul-use', t.use.list);

  // 공유
  document.getElementById('h-share').innerText = t.share.h;
  document.getElementById('p-share-1').innerHTML = t.share.p1;
  document.getElementById('p-share-2').innerHTML = t.share.p2;
  renderList('ul-share', t.share.ul);
  document.getElementById('p-share-3').innerText = t.share.p3;

  // 보안
  document.getElementById('h-sec').innerText = t.sec.h;
  document.getElementById('p-sec').innerText = t.sec.p;

  // 보존
  document.getElementById('h-ret').innerText = t.ret.h;
  renderList('ul-ret', t.ret.list);

  // 권리
  document.getElementById('h-rights').innerText = t.rights.h;
  document.getElementById('p-rights-intro').innerText = t.rights.intro;
  renderList('ul-rights', t.rights.list);
  document.getElementById('p-rights-contact').innerHTML = t.rights.contact;

  // 아동
  document.getElementById('h-child').innerText = t.child.h;
  document.getElementById('p-child').innerText = t.child.p;

  // 변경
  document.getElementById('h-change').innerText = t.change.h;
  document.getElementById('p-change').innerText = t.change.p;

  // 연락처
  document.getElementById('h-contact').innerText = t.contact.h;
  document.getElementById('p-contact-intro').innerText = t.contact.intro;

  // 버튼 상태 업데이트
  document.getElementById('btn-en').classList.toggle('active', lang === 'en');
  document.getElementById('btn-ko').classList.toggle('active', lang === 'ko');

  // HTML lang 속성 변경
  document.documentElement.lang = lang;
}

// 초기 실행: 브라우저 언어 감지
window.onload = function() {
  const userLang = navigator.language || navigator.userLanguage; 
  if (userLang.startsWith('ko')) {
    setLanguage('ko');
  } else {
    setLanguage('en');
  }
};